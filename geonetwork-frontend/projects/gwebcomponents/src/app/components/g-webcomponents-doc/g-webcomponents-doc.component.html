<div class="px-4">
  @switch (webcomponentId()) {
    @case ('gc-data-results-table') {
      <div class="h-30">
        <h2 class="text-3xl">Data preview with webcomponents</h2>
      </div>

      <div class="text-2x font-bold">Browse CSV file</div>

      <p-fieldset
        legend="Configure component"
        [toggleable]="true"
        collapsed="true">
        <div class="flex flex-col gap-4">
          <div class="flex flex-col gap-2">
            <label for="selectedSourceFile">Choose a sample file</label>
            <p-dropdown
              inputId="selectedSourceFile"
              styleClass="w-full"
              [(ngModel)]="selectedSourceFile"
              [options]="csvSourceFiles" />
          </div>

          <div class="flex flex-col gap-2">
            <label for="selectedSourceFileInput"> CSV file URL</label>
            <input
              id="selectedSourceFileInput"
              type="text"
              pInputText
              [(ngModel)]="selectedSourceFile"
              class="w-full" />
          </div>

          <div class="flex flex-col gap-2">
            <label for="allowDataTableExport"> Enable CSV export </label>
            <p-inputSwitch
              inputId="allowDataTableExport"
              [(ngModel)]="allowDataTableExport" />
          </div>
        </div>
      </p-fieldset>

      <gc-data-results-table
        [source]="selectedSourceFile()"
        [export]="allowDataTableExport()"
        class="w-full"></gc-data-results-table>

      <g-webcomponents-doc-embed>
        <pre class="whitespace-pre-wrap">
<![CDATA[<gc-data-results-table-component source="{{
            selectedSourceFile()
          }}" export="{{
            allowDataTableExport()
          }}" class="w-full"></gc-data-results-table-component>
]]>
        </pre>
      </g-webcomponents-doc-embed>
    }
    @case ('gc-search-results') {
      <div class="h-30">
        <h2 class="text-3xl">Search box and results</h2>
      </div>

      <div class="m-4">
        <g-webcomponent-configuration
          [(apiUrl)]="apiUrl"
          [(fullTextSearch)]="fullTextSearch"
          [(searchFilter)]="searchFilter"
          [(pageSize)]="pageSize"
          [(sort)]="sort"
          [(selectionMode)]="selectionMode"
          [(selectedFilters)]="selectedFilters"
          [(selectedFilterPlaceholders)]="selectedFilterPlaceholders"
          [(selectedFilterLayouts)]="listOfFilterLayouts">
        </g-webcomponent-configuration>

        <gc-search
          [api-url]="apiUrl"
          [full-text-search]="fullTextSearch()"
          landing-page="${apiUrl}/records/${uuid}"
          [filter]="searchFilter()"
          [size]="pageSize()"
          [sort]="sort()"
          [list-of-filter]="listOfFilters()"
          [list-of-filter-placeholder]="listOfFilterPlaceholders()"
          [list-of-filter-layout]="listOfFilterLayouts()" />

        <g-webcomponents-doc-embed>
          <pre class="whitespace-pre-wrap">
<![CDATA[ <gc-search-component
            api-url="{{ apiUrl }}"
            full-text-search="{{ fullTextSearch() }}"
            filter="{{ searchFilter() }}"
            size="{{ pageSize() }}"
            sort="{{ sort() }}"
            list-of-filter="{{ listOfFilters() }}"
            list-of-filter-placeholders="{{ listOfFilterPlaceholders() }}"
            list-of-filter-layout="{{ listOfFilterLayouts() }}"
          />
]]>
          </pre>
        </g-webcomponents-doc-embed>
      </div>
    }
    @default {
      <div class="h-30">
        <h2 class="text-3xl">Table of records</h2>
      </div>

      <div class="mb-4">
        <g-webcomponent-configuration
          [(apiUrl)]="apiUrl"
          [(fullTextSearch)]="fullTextSearch"
          [(searchFilter)]="searchFilter"
          [(pageSize)]="pageSize"
          [(sort)]="sort"
          [(selectionMode)]="selectionMode"
          [(selectedFilters)]="selectedFilters"
          [(selectedFilterPlaceholders)]="selectedFilterPlaceholders"
          [(selectedFilterLayouts)]="listOfFilterLayouts">
          <div class="flex flex-col gap-2">
            <label for="listOfFieldsAsText">Select table columns</label>
            <p-autoComplete
              inputId="listOfFieldsAsText"
              styleClass="w-full"
              [suggestions]="filteredFields"
              [dropdown]="true"
              optionValue="path"
              optionLabel="label"
              (completeMethod)="autocompleteField($event)"
              (onSelect)="autocompleteAddValue($event)"
              (onKeyUp)="autocompleteKeyboardEvent($event)"
              [ngModel]="listOfFieldsAsText()" />
          </div>

          <div class="flex flex-col gap-2">
            <label for="listOfLabelsAsText">Define column label</label>
            <input
              id="listOfLabelsAsText"
              type="text"
              class="w-full"
              pInputText
              [(ngModel)]="listOfLabelsAsText" />
          </div>

          <div class="flex flex-col gap-2">
            <label for="allowResultsTableExport"> Enable CSV export </label>
            <p-inputSwitch
              inputId="allowResultsTableExport"
              [(ngModel)]="allowResultsTableExport" />
          </div>
          <div class="flex flex-col gap-2">
            <label for="allowColumnsSelection"> Enable column toggle </label>
            <p-inputSwitch
              inputId="allowColumnsSelection"
              [(ngModel)]="allowColumnsSelection" />
          </div>
        </g-webcomponent-configuration>
      </div>

      <gc-search-results-table
        [api-url]="apiUrl"
        [full-text-search]="fullTextSearch()"
        [sort]="sort()"
        [filter]="searchFilter()"
        [size]="pageSize()"
        [list-of-label]="listOfLabelsAsText()"
        [list-of-field]="listOfFieldsAsText()"
        [list-of-filter]="listOfFilters()"
        [list-of-filter-placeholder]="listOfFilterPlaceholders()"
        [list-of-filter-layout]="listOfFilterLayouts()"
        [export]="allowResultsTableExport()"
        landing-page="${apiUrl}/records/${uuid}"
        landing-page-link-on="resourceTitleObject.default"
        scroll-height="80vh"
        [column-selection]="allowColumnsSelection()"
        [selection-mode]="selectionMode" />

      <g-webcomponents-doc-embed>
        <pre class="whitespace-pre-wrap">
<![CDATA[<gc-search-results-table-component
          api-url="{{ apiUrl }}"
          full-text-search="{{ fullTextSearch() }}"
          filter="{{ searchFilter() }}"
          size="{{ pageSize() }}"
          sort="{{ sort() }}"
          list-of-label="{{ listOfLabelsAsText() }}"
          list-of-field="{{ listOfFieldsAsText() }}"
          list-of-filter="{{ listOfFilters() }}"
          list-of-filter-placeholder="{{ listOfFilterPlaceholders() }}"
          list-of-filter-layout="{{ listOfFilterLayouts() }}"
          export="{{ allowResultsTableExport() }}"
          landing-page="${apiUrl}/records/${uuid}"
          landing-page-llink-on="resourceTitleObject.default"
          scroll-height="80vh"
          columnSelection="{{ allowColumnsSelection() }}"
          selection-mode="{{ selectionMode }}" />
]]>
        </pre>
      </g-webcomponents-doc-embed>
    }
  }
</div>
