<div class="grid grid-cols-1 md:grid-cols-3 gap-4 m-4">
  @for (type of listOfOverviewTypes; track $index) {
    <div
      class="border-2 rounded-md p-4"
      [class.hidden]="type === 'overview_suggestion' && !suggestion()"
      [class.border-4]="overviewType() === type"
      (click)="setType(type)">
      <p-radiobutton
        [name]="type"
        [value]="type"
        [disabled]="overviewAttachedToRecord()"
        [(ngModel)]="overviewType"
        [inputId]="type"></p-radiobutton>
      <label [attr.for]="type" class="ml-2 font-bold">{{ type }}</label>
      @switch (type) {
        @case ('overview_suggestion') {
          @if (suggestion()) {
            <img
              [attr.src]="suggestionData()"
              alt="Generated from the datasource"
              class="max-w-full p-6" />

            <p-button
              label="Save overview"
              icon="fa fa-save"
              [disabled]="!canSaveOverview()"
              (onClick)="setRecordOverview()"
              class="mt-4"></p-button>
          }
        }
        @case ('overview_upload') {
          <p-fileupload
            chooseLabel="Upload overview"
            mode="basic"
            auto="true"
            [disabled]="overviewType() !== 'overview_upload'"
            name="overview_upload"
            chooseIcon="fa fa-upload"
            accept="image/png,image/jpeg,image/gif"
            [maxFileSize]="100 * 1000000"
            (onSelect)="setOverviewFile($event)">
          </p-fileupload>

          @if (uploadedFile() && overviewType() === 'overview_upload') {
            <img class="max-w-full p-6" alt="overview" [src]="uploadedFile()" />
          }
        }
      }
    </div>
  }
</div>
