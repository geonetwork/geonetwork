@if (analysisResult()) {
  @let isVector = true;
  @let isRaster = !isVector;

  <h2 class="pt-2 pb-2 text-2xl font-medium">
    @if (isVector) {
      <span class="font-bold">{{ analysisResult().resourceTitleObject.default }}</span>
      dataset contains
      <span class="font-bold">{{
          analysisResult()
      }}</span>
      features.
    } @else if (isRaster) {
      RASTER dataset contains {{ analysisResult() }} band(s).
    }
  </h2>

  <div class="grid grid-cols-8 gap-4">
    <div class="font-medium">Resource identifier</div>
    <div class="col-span-7">
      <g-inplace-field
        property="resourceIdentifier"
        [uuid]="uuid()"
        [(value)]="resourceIdentifier" />
    </div>

    <div class="font-medium">Source</div>
    <div class="col-span-7">{{ analysisResult().link[0].urlObject.default }}</div>

    <div class="font-medium">Format</div>
    <div class="col-span-7">{{ analysisResult().format[0] }}</div>

    <div class="font-medium">Spatial representation</div>
    <div class="col-span-7">
      <i
        [attr.class]="
          isVector ? 'fa fa-fw fa-vector-square' : 'fa fa-fw fa-table-cells'
        "></i>
      {{ analysisResult().cl_spatialRepresentationType[0] }}
    </div>

    @if (isVector && analysisResult().geom) {
      <div class="font-medium">Geometry type</div>
      <div class="col-span-7">
        {{ analysisResult() }}
      </div>

      <div class="font-medium">Spatial extent</div>
      <div class="col-span-7">
        {{ analysisResult().geom }}
      </div>
    }

    @if (isRaster) {
      @if (analysisResult().geom) {
        <div class="font-medium">Spatial extent</div>
        <div class="col-span-7">
          {{ analysisResult().geom }}
        </div>
      }
      @if (analysisResult().size) {
        <div class="font-medium">Dimensions</div>
        <div class="col-span-7">
          X: {{ analysisResult().size[0] }} / Y: {{ analysisResult().size[1] }}
        </div>
      }
    }

    @if (analysisResult().coordinateSystem[0]; as crs) {
      <div class="font-medium">Coordinate system</div>
      <div class="col-span-7">
        <a href="http://epsg.io/{{ crs.replace('EPSG:', '') }}" target="_blank">{{ crs }}</a>
      </div>
    }

    @if (isVector) {
      <div class="font-medium">Data model</div>
      <div class="col-span-7">
        <p-table
          [value]="analysisResult().featureTypes"
          styleClass="w-full"
          tableStyleClass="w-full">
          <ng-template pTemplate="header">
            <tr>
              <th>Column name</th>
              <th>Column type</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-field>
            <tr>
              <td>{{ field.code }}</td>
              <td>{{ field.typeName }}</td>
            </tr>
          </ng-template>
        </p-table>
      </div>

      @if (isRaster) {
        @if (analysisResult()) {
          <div class="font-medium">Temporal extent</div>
          <div class="col-span-7">
            {{ analysisResult() }}
          </div>
        }
      }
      @if (analysisResult().geom) {
        <div class="font-medium">Spatial extent?</div>
        <div class="col-span-7">
          <p-select
            [options]="analysisResult().featureTypes"
            placeholder="Compute spatial extent from attribute"
            optionLabel="code"
            optionValue="code" />
        </div>
      }
      <div class="font-medium">Temporal extent?</div>
      <div class="col-span-7">
        <p-select
          [options]="analysisResult().featureTypes"
          placeholder="Compute temporal extent from attribute"
          optionLabel="code"
          optionValue="code" />
      </div>

      <div class="font-medium">Vertical extent?</div>
      <div class="col-span-7">
        <p-select
          [options]="analysisResult().featureTypes"
          placeholder="Compute vertical extent from attribute"
          optionLabel="code"
          optionValue="code" />
      </div>
    }
  </div>
}
