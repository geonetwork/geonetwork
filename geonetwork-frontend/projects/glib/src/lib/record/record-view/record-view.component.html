<ng-template #defaultBackButton></ng-template>

@if (recordStatus(); as status) {
  <p>{{ status }}</p>
}
@if (record(); as record) {
  <div class="flex p-4">
    <div class="basis-2/3">
      <ng-container
        *ngTemplateOutlet="
          backButtonTplRef() || defaultBackButton
        "></ng-container>
      <h1 class="text-4xl font-extrabold my-10">
        {{ record.resourceTitleObject?.default }}
      </h1>
    </div>
    <div class="basis-1/3"></div>
  </div>

  <p-fieldset>
    <ng-template pTemplate="header">
      <div class="flex align-items-center gap-2">
        <i class="fa fa-info"></i>
        <span class="font-bold white-space-nowrap m-0"> Information </span>
      </div>
    </ng-template>
    <div class="flex gap-4">
      <div class="basis-2/3">
        <div class="shadow-lg p-4 whitespace-pre-line">
          {{ record.resourceAbstractObject?.default }}
        </div>

        <div class="shadow-lg p-4">
          <g-record-field-keywords [field]="record.tag" />
        </div>

        <p-accordion [multiple]="true" [activeIndex]="[0]">
          <p-accordion-panel value="0">
            <p-accordion-header
              >Licenses and use constraints
            </p-accordion-header>
            <p-accordion-content><p></p></p-accordion-content>
          </p-accordion-panel>
          <p-accordion-panel value="1">
            <p-accordion-header>Technical information</p-accordion-header>
            <p-accordion-content
              ><p>
                Coordinate system:

                @for (crs of record.coordinateSystem; track $index) {
                  {{ crs | json }}
                }
              </p></p-accordion-content
            >
          </p-accordion-panel>
          <p-accordion-panel value="2">
            <p-accordion-header>Extents</p-accordion-header>
            <p-accordion-content
              ><p>
                {{ record.geom | json }}
              </p></p-accordion-content
            >
          </p-accordion-panel>
          <p-accordion-panel value="3">
            <p-accordion-header>Lineage</p-accordion-header>
            <p-accordion-content
              ><p>
                {{ record.lineageObject?.default }}
              </p></p-accordion-content
            >
          </p-accordion-panel>
        </p-accordion>
      </div>
      <div class="basis-1/3">
        <div class="shadow-lg p-4 aspect-square">
          <g-record-field-overview [field]="record.overview" />
        </div>
      </div>
    </div>
  </p-fieldset>
  <p-fieldset>
    <ng-template pTemplate="header">
      <div class="flex align-items-center gap-2">
        <i class="fa fa-database"></i>
        <span class="font-bold white-space-nowrap m-0"> Preview </span>
      </div>
    </ng-template>
    <p></p>
  </p-fieldset>
  <p-fieldset>
    <ng-template pTemplate="header">
      <div class="flex align-items-center gap-2">
        <i class="fa fa-download"></i>
        <span class="font-bold white-space-nowrap m-0"> Distribution </span>
      </div>
    </ng-template>
    <p>
      <g-record-field-links [links]="record.link" />
    </p>
  </p-fieldset>
  <p-fieldset>
    <ng-template pTemplate="header">
      <div class="flex align-items-center gap-2">
        <i class="fa fa-table"></i>
        <span class="font-bold white-space-nowrap m-0"> Model </span>
      </div>
    </ng-template>
    <p></p>
  </p-fieldset>
}
